#!/bin/sh
if [ -f .temp.c ]; then 
    rm .temp.c
fi
node -e 'try {
    const fs = require("fs");
    fs.writeFileSync(".temp.c", require("./lib").compile(fs.readFileSync("'$1'")));
} catch (error) {
    console.error(error.toStringColors());
    process.exit(1);
}' && gcc -Wall -Werror -Wpedantic -Isrc/js/builtins .temp.c